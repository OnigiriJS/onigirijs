Onigiri.security.init({autoInjectCSRF:!0}),console.log("üçô OnigiriJS Demo App Initialized"),console.log("Loaded modules:",Onigiri.modules);const menuData=[{id:1,name:"Salmon Onigiri",description:"Fresh salmon with seasoned rice",price:3.5,emoji:"üêü"},{id:2,name:"Tuna Onigiri",description:"Spicy tuna with mayo",price:3.5,emoji:"üê†"},{id:3,name:"Umeboshi Onigiri",description:"Pickled plum, classic taste",price:3,emoji:"üå∏"},{id:4,name:"Chicken Teriyaki",description:"Grilled chicken with teriyaki sauce",price:4,emoji:"üçó"},{id:5,name:"Vegetable Onigiri",description:"Fresh vegetables and herbs",price:3.25,emoji:"ü•¨"},{id:6,name:"Shrimp Tempura",description:"Crispy tempura shrimp",price:4.5,emoji:"üç§"}],shop=new Onigiri.prototype.Component({data:{menu:[],cart:[],loading:!1},computed:{cartTotal(){return this.cart.reduce(((t,e)=>t+e.price*e.quantity),0)},cartCount(){return this.cart.reduce(((t,e)=>t+e.quantity),0)}},methods:{loadMenu(){this.loading=!0,setTimeout((()=>{this.menu=menuData,this.loading=!1,this.renderMenu()}),500)},renderMenu(){const t=O("#menu-container");t.empty(),this.menu.forEach((e=>{t.append(`\n                            <div class="menu-item">\n                                <h3>${e.emoji} ${e.name}</h3>\n                                <p class="description">${e.description}</p>\n                                <div class="price">$${e.price.toFixed(2)}</div>\n                                <button class="btn add-to-cart" data-id="${e.id}">\n                                    Add to Cart\n                                </button>\n                            </div>\n                        `)})),O(".add-to-cart").on("click",(t=>{const e=parseInt(O(t.target).data("id")),i=this.menu.find((t=>t.id===e));this.addToCart(i)}))},addToCart(t){const e=this.cart.find((e=>e.id===t.id));e?e.quantity++:this.cart.push({...t,quantity:1}),this.updateCart(),showNotification(`Added ${t.name} to cart! üçô`)},removeFromCart(t){this.cart=this.cart.filter((e=>e.id!==t)),this.updateCart()},updateQuantity(t,e){const i=this.cart.find((e=>e.id===t));i&&(i.quantity+=e,i.quantity<=0?this.removeFromCart(t):this.updateCart())},updateCart(){const t=O("#cart-items");t.empty(),0===this.cart.length?(t.html('<p style="text-align: center; color: #999;">Cart is empty</p>'),O("#checkout-btn").attr("disabled",!0)):(this.cart.forEach((e=>{t.append(`\n                                <div class="cart-item">\n                                    <div>\n                                        <div class="cart-item-name">${e.emoji} ${e.name}</div>\n                                        <div style="color: #666; font-size: 0.875rem;">$${e.price.toFixed(2)} √ó ${e.quantity}</div>\n                                    </div>\n                                    <div class="cart-item-controls">\n                                        <button onclick="shop.updateQuantity(${e.id}, -1)">‚àí</button>\n                                        <span>${e.quantity}</span>\n                                        <button onclick="shop.updateQuantity(${e.id}, 1)">+</button>\n                                    </div>\n                                </div>\n                            `)})),O("#checkout-btn").removeAttr("disabled")),O("#cart-total").text(this.cartTotal.toFixed(2)),this.saveCart()},saveCart(){Onigiri.storage.set("cart",this.cart)},loadCart(){this.cart=Onigiri.storage.get("cart",[]),this.updateCart()},checkout(){showNotification(`Order placed! Total: $${this.cartTotal.toFixed(2)} üçô`,3e3),this.cart=[],this.updateCart()}},created(){console.log("üçô Shop component created"),this.loadCart()},mounted(){console.log("üçô Shop component mounted"),this.loadMenu()}});shop.mount("body"),O("#checkout-btn").on("click",(()=>{shop.checkout()})),O(".tab-btn").on("click",(function(){const t=O(this).data("tab");O(".tab-btn").removeClass("active"),O(this).addClass("active"),O(".demo-section").removeClass("active"),O(`#${t}-section`).addClass("active")})),O("#contact-form").on("submit",(async function(t){t.preventDefault(),O(".error-message").hide().text(""),O(".input-error").removeClass("input-error");const e=O(this).validate({name:{required:!0,minLength:2},email:{required:!0,email:!0},phone:{pattern:"^\\d{3}-\\d{3}-\\d{4}$"},message:{required:!0,minLength:10}});e.isValid?(showNotification("Message sent successfully! üçô",3e3),O(this).elements[0].reset()):(Object.keys(e.errors).forEach((t=>{O(`[name="${t}"]`).addClass("input-error"),O(`#${t}-error`).text(e.errors[t][0]).show()})),showNotification("Please fix the errors",2e3))}));const counter=new Onigiri.prototype.Component({data:{count:0,eventsCount:0},methods:{increment(){this.count++,this.eventsCount++}},watchers:{count(t){O("#counter-value").text(t),Onigiri.storage.set("counter",t)}},created(){this.count=Onigiri.storage.get("counter",0),this.updateStats()},updateStats(){O("#counter-value").text(this.count),O("#storage-items").text(Onigiri.storage.keys().length),O("#events-fired").text(this.eventsCount)}});function showNotification(t,e=2e3){const i=O("#notification");i.html(`üçô ${t}`),i.fadeIn(200),setTimeout((()=>{i.fadeOut(200)}),e)}function demoAnimations(){const t=O("#animation-box");t.fadeOut(300,(()=>{t.fadeIn(300,(()=>{t.slideUp(300,(()=>{t.slideDown(300)}))}))}))}function demoStorage(){Onigiri.storage.set("demo_"+Date.now(),{test:"data"}),O("#storage-count").text(Onigiri.storage.keys().length),showNotification("Storage updated!")}function demoSecurity(){O("#csrf-token").text(Onigiri.security.getToken()),O("#security-status").text("Yes"),showNotification("Security features active!")}counter.mount("body"),O("#increment-btn").on("click",(()=>{counter.increment(),counter.updateStats()})),O(".accordion-header").on("click",(function(){const t=O(this).next(),e=O(this).hasClass("open");O(".accordion-header").removeClass("open"),O(".accordion-content").slideUp(300),e||(O(this).addClass("open"),t.slideDown(300))})),O("#storage-prefix").text(Onigiri.storage._prefix),O("#storage-count").text(Onigiri.storage.keys().length),O("#csrf-token").text(Onigiri.security.getToken()),O("#security-status").text("Yes"),console.log("üçô Demo app ready! Try the features!");
